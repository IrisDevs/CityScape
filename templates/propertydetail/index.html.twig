{% extends 'base.html.twig' %}

{% block title %}Hello PropertyDetailsController!
{% endblock %}

{% block body %}
	<!-- ==================== Breadcrumb Start Here ==================== -->
	<section class="breadcrumb padding-y-120">
		<img src="assets/images/thumbs/breadcrumb-img.png" alt="" class="breadcrumb__img">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-lg-8">
					<div class="breadcrumb__wrapper">
						<h2 class="breadcrumb__title">{{ property.title }}</h2>
						<ul class="breadcrumb__list">
							<li class="breadcrumb__item">
								<a href="index.html" class="breadcrumb__link">
									<i class="las la-home"></i>
									Accueil</a>
							</li>
							<li class="breadcrumb__item">
								<i class="fas fa-angle-right"></i>
							</li>
							<li class="breadcrumb__item">
								<span class="breadcrumb__item-text">
									{{ property.title }}
								</span>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- ==================== Breadcrumb End Here ==================== -->

	<section class="property-details padding-y-120">
		<div class="container container-two">
			<div class="row gy-4">
				<div class="col-lg-8">
					<div class="row gy-4">
						{% for img in property.propPicture %}
							{# verifier que la 1ere image est en col-12 et les autre en col-4 #}
							{% if loop.first %}
								<div class="col-sm-12 col-6">
									<div class="property-details__thumb">
										<img src="{{ vich_uploader_asset(img, 'attachmentFile') }}" alt="" class="cover-img">
									</div>
								</div>
							{% else %}
								<div class="col-sm-4 col-6">
									<div class="property-details__thumb">
										<img src="{{ vich_uploader_asset(img, 'attachmentFile') }}" alt="" class="cover-img">
									</div>
								</div>
							{% endif %}
						{% endfor %}
					</div>
					<div class="property-details-wrapper">
						<div class="property-details-item">
							<h6 class="property-details-item__title">Preview</h6>
							<div class="property-details-item__content">
								<div class="row gy-4 gy-lg-5">
									<div class="col-sm-4 col-6">
										<div class="amenities-content d-flex align-items-center">
											<span class="amenities-content__icon">
												<img src="/assets/images/icons/amenities1.svg" alt="">
											</span>
											<div class="amenities-content__inner">
												<span class="amenities-content__text">Room</span>
												<h6 class="amenities-content__title mb-0 font-16">{{ property.propNbRooms }}
													Room</h6>
											</div>
										</div>
									</div>
									<div class="col-sm-4 col-6">
										<div class="amenities-content d-flex align-items-center">
											<span class="amenities-content__icon">
												<img src="/assets/images/icons/amenities5.svg" alt="">
											</span>
											<div class="amenities-content__inner">
												<span class="amenities-content__text">Size</span>
												<h6 class="amenities-content__title mb-0 font-16">{{ property.propSQM }}
													m²</h6>
											</div>
										</div>
									</div>
									<div class="col-sm-4 col-6">
										<div class="amenities-content d-flex align-items-center">
											<span class="amenities-content__icon">
												<img src="/assets/images/icons/amenities6.svg" alt="">
											</span>
											<div class="amenities-content__inner">
												<span class="amenities-content__text">Property Type</span>
												<h6 class="amenities-content__title mb-0 font-16">{{ property.propHousingType }}</h6>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="property-details-item">
							<h6 class="property-details-item__title">Features</h6>
							<div class="property-details-item__content">
								<div class="row gy-2">
									<div class="col-sm-6">
										<ul class="check-list">
											<li class="check-list__item d-flex align-items-center">
												<span class="icon">
													<i class="fas fa-check"></i>
												</span>
												<span class="text">Dream Property Solutions</span>
											</li>
											<li class="check-list__item d-flex align-items-center">
												<span class="icon">
													<i class="fas fa-check"></i>
												</span>
												<span class="text">Secure Property Partners</span>
											</li>
											<li class="check-list__item d-flex align-items-center">
												<span class="icon">
													<i class="fas fa-check"></i>
												</span>
												<span class="text">Doors to Your Future</span>
											</li>
										</ul>
									</div>
									<div class="col-sm-6">
										<ul class="check-list">
											<li class="check-list__item d-flex align-items-center">
												<span class="icon">
													<i class="fas fa-check"></i>
												</span>
												<span class="text">Prestige Property Management</span>
											</li>
											<li class="check-list__item d-flex align-items-center">
												<span class="icon">
													<i class="fas fa-check"></i>
												</span>
												<span class="text">Global Real Estate Investments</span>
											</li>
											<li class="check-list__item d-flex align-items-center">
												<span class="icon">
													<i class="fas fa-check"></i>
												</span>
												<span class="text">You Home with Experience</span>
											</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<div class="property-details-item">
							<h6 class="property-details-item__title">Géolocalisation du bien immobilier</h6>
							<div class="property-details-item__content">
								<input type="hidden" id="lat" data-latitude="{{ property.latitude }}">
								<input type="hidden" id="long" data-longitude="{{ property.longitude }}">
								<div class="address-map" id="map"></div>
							</div>
						</div>
                        <!--
						<div class="property-details-item">
							<h6 class="property-details-item__title">House</h6>
							<div class="property-details-item__content">
								<div class="house-content position-relative">
									<img src="assets/images/thumbs/house.png" alt="">
									<a href="https://www.youtube.com/watch?v=pPl3ZZdTP3g" class="popup-video-link video-popup__button style-two">
										<i class="fas fa-play text-gradient"></i>
									</a>
								</div>
							</div>
						</div>
                        -->
					</div>
				</div>
				<div class="col-lg-4">
					<div class="common-sidebar-wrapper">
						<div class="common-sidebar">
							<h6 class="common-sidebar__title">
								Category
							</h6>
                            
							<ul class="category-list">
                                {% for category in property.propCategory.categories %}    
								<li class="category-list__item">
									<a href="{{ path('app_propertydetail', {'slug': category.slug}) }}" class="category-list__link flx-between">
										<span class="text">{{ category.name }}</span>
										<span class="number">(1)</span>
									</a>
								</li>
                                {% endfor %}
							</ul>
						</div>
						<div class="common-sidebar">
							<h6 class="common-sidebar__title">
								Recent Post
							</h6>
							<div class="latest-blog">
								<div class="latest-blog__thumb">
									<a href="blog-details.html">
										<img src="assets/images/thumbs/latest-blog1.png" class="cover-img" alt=""></a>
								</div>
								<div class="latest-blog__content">
									<span class="latest-blog__category font-12 flx-align gap-1">
										<span class="icon text-gradient">
											<i class="fas fa-folder-open"></i>
										</span>
										Category</span>
									<h6 class="latest-blog__title">
										<a href="blog-details.html">A picture is worth standard and stand us return</a>
									</h6>
								</div>
							</div>
							<div class="latest-blog">
								<div class="latest-blog__thumb">
									<a href="blog-details.html">
										<img src="assets/images/thumbs/latest-blog2.png" class="cover-img" alt=""></a>
								</div>
								<div class="latest-blog__content">
									<span class="latest-blog__category font-12 flx-align gap-1">
										<span class="icon text-gradient">
											<i class="fas fa-folder-open"></i>
										</span>
										Category</span>
									<h6 class="latest-blog__title">
										<a href="blog-details.html">Your journ homeownership starts here</a>
									</h6>
								</div>
							</div>
							<div class="latest-blog">
								<div class="latest-blog__thumb">
									<a href="blog-details.html">
										<img src="assets/images/thumbs/latest-blog3.png" class="cover-img" alt=""></a>
								</div>
								<div class="latest-blog__content">
									<span class="latest-blog__category font-12 flx-align gap-1">
										<span class="icon text-gradient">
											<i class="fas fa-folder-open"></i>
										</span>
										Category</span>
									<h6 class="latest-blog__title">
										<a href="blog-details.html">Trust us to guide you the a through the process</a>
									</h6>
								</div>
							</div>
						</div>
						<div class="common-sidebar">
							<h6 class="common-sidebar__title">
								Properties
							</h6>
							<div class="row gy-4">
								<div class="col-lg-6 col-sm-4 col-6">
									<a href="property.html" class="properties-item d-block w-100">
										<img src="assets/images/thumbs/properties-1.png" alt="Property Image" class="cover-img">
										<span class="properties-item__text">Relax House</span>
									</a>
								</div>
								<div class="col-lg-6 col-sm-4 col-6">
									<a href="property.html" class="properties-item d-block w-100">
										<img src="assets/images/thumbs/properties-2.png" alt="Property Image" class="cover-img">
										<span class="properties-item__text">Hunting Adventure</span>
									</a>
								</div>
								<div class="col-lg-6 col-sm-4 col-6">
									<a href="property.html" class="properties-item d-block w-100">
										<img src="assets/images/thumbs/properties-3.png" alt="Property Image" class="cover-img">
										<span class="properties-item__text">Homeowner ship</span>
									</a>
								</div>
								<div class="col-lg-6 col-sm-4 col-6">
									<a href="property.html" class="properties-item d-block w-100">
										<img src="assets/images/thumbs/properties-4.png" alt="Property Image" class="cover-img">
										<span class="properties-item__text">Real Dreams</span>
									</a>
								</div>
								<div class="col-lg-6 col-sm-4 col-6">
									<a href="property.html" class="properties-item d-block w-100">
										<img src="assets/images/thumbs/properties-5.png" alt="Property Image" class="cover-img">
										<span class="properties-item__text">New Doors</span>
									</a>
								</div>
								<div class="col-lg-6 col-sm-4 col-6">
									<a href="property.html" class="properties-item d-block w-100">
										<img src="assets/images/thumbs/properties-6.png" alt="Property Image" class="cover-img">
										<span class="properties-item__text">The Heart</span>
									</a>
								</div>
							</div>
						</div>


					</div>
				</div>
			</div>
		</div>
	</section>


	<!-- ============================= CTA section Start ===================== -->
	<section class="cta padding-b-120">
		<div class="container container-two">
			<div class="cta-box flx-between gap-2">
				<div class="cta-content">
					<h2 class="cta-content__title">Subscribe To Our
						<span class="text-gradient">Newsletter</span>
					</h2>
					<p class="cta-content__desc">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</p>
					<form action="#" class="cta-content__form d-flex align-items-center gap-2">
						<div class="position-relative w-100">
							<input type="text" class="common-input common-input--withLeftIcon w-100" placeholder="Enter Your Email Address">
							<span class="input-icon input-icon--left text-gradient font-20 line-height-1">
								<i class="far fa-envelope"></i>
							</span>
						</div>
						<button type="submit" class="btn btn-main text-uppercase flex-shrink-0">
							Subscribe
							<span class="text">Now</span>
						</button>
					</form>
				</div>
				<div class="cta-content__thumb d-xl-block d-none">
					<img src="assets/images/thumbs/cta-img.png" alt="">
				</div>
			</div>
		</div>
	</section>
	<!-- ============================= CTA section End ===================== -->
{% endblock %}

{% block stylesheet %}
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
	<style type="text/css">
		#map {
			/* la carte DOIT avoir une hauteur sinon elle n'apparaît pas */
			height: 375px;
		}
	</style>
{% endblock %}

{% block javascript %}
	<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
	<script>
        // On initialise la latitude et la longitude de la base de donnée avec le
        // input hidden qui contient les valeurs
        var lat = document.getElementById('lat').getAttribute('data-latitude');
        var lon = document.getElementById('long').getAttribute('data-longitude');
        
        // initialisation de la carte
            function initMap() {
                // Créer l'objet "macarte" et l'insèrer dans l'élément HTML qui a l'ID "map"
                macarte = L.map('map').setView([lat, lon], 11);
                // Leaflet ne récupère pas les cartes (tiles) sur un serveur par défaut. Nous devons lui préciser où nous souhaitons les récupérer. Ici, openstreetmap.fr
                L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                    // Il est toujours bien de laisser le lien vers la source des données
                    attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
                    minZoom: 1,
                    maxZoom: 20
                }).addTo(macarte);
            }

            window.onload = function(){
		        // Fonction d'initialisation qui s'exécute lorsque le DOM est chargé
		        initMap(); 
                var marker = L.marker([lat, lon]).addTo(macarte);
            };
    </script>

{% endblock %}